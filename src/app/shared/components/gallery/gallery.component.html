<div class="gallery-container">

  <!-- 1. Bot√≥n para M√≥vil (Solo visible en pantallas peque√±as) -->
  <button class="mobile-filter-toggle" (click)="toggleFilters()">
    <span class="icon">‚öôÔ∏è</span> Filters
  </button>

  <!-- 2. Fondo oscuro (Overlay) para cerrar al hacer clic fuera -->
  <div class="filter-overlay"
       [class.active]="isFiltersOpen"
       (click)="toggleFilters()">
  </div>

  <!-- 3. Tu Sidebar con la clase din√°mica -->
  <aside class="filters" [class.open]="isFiltersOpen">

    <div class="filter-header">
      <h3>Filters</h3>
      <!-- Bot√≥n X para cerrar dentro del men√∫ -->
      <button class="close-btn" (click)="toggleFilters()">‚úï</button>
    </div>

    <!-- TUS FILTROS ORIGINALES (Sin cambios) -->
    <div class="filter-group">
      <label>Category</label>
      <select [(ngModel)]="filters.category" (change)="onFilterChange()">
        <option value="">All</option>
        <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Date Range</label>
      <input type="date" [(ngModel)]="filters.startDate" (change)="onFilterChange()">
      <input type="date" [(ngModel)]="filters.endDate" (change)="onFilterChange()">
    </div>

    <!-- ... resto de tus filtros ... -->
    <div class="filter-group">
      <label>Model Gender</label>
      <select [(ngModel)]="filters.gender" (change)="onFilterChange()">
        <option value="">All</option>
        <option *ngFor="let g of genders" [value]="g">{{ g }}</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Nationality</label>
      <input type="text" [(ngModel)]="filters.nationality" (input)="onFilterChange()" placeholder="e.g. French">
    </div>

    <div class="filter-group">
      <label>Location</label>
      <input type="text" [(ngModel)]="filters.locationName" (input)="onFilterChange()" placeholder="e.g. Paris">
    </div>

  </aside>

  <!-- Photo Grid -->
  <main class="grid-area">
    <!-- GRID PRINCIPAL (Estilo Pinterest) -->
    <div class="photo-grid">
      <div class="photo-card" *ngFor="let photo of photos; trackBy: trackByPhotoId" (click)="openPhoto(photo)">
        <img [src]="photo.url" [alt]="photo.title" loading="lazy">
        <!-- Opcional: Overlay con t√≠tulo al pasar mouse -->
        <div class="info-overlay">
          <!--<span>{{ photo.title }}</span>-->
        </div>
      </div>
    </div>

    <!-- MODAL (Se muestra solo si selectedPhoto existe) -->
    <div class="photo-modal" *ngIf="selectedPhoto" (click)="closeModal()">

      <!-- Bot√≥n cerrar -->
      <button class="close-btn" (click)="closeModal()">‚úï</button>

      <!-- Contenido (stopPropagatin para que al clickear la foto no se cierre el modal) -->
      <div class="modal-content" (click)="$event.stopPropagation()">

        <!-- Foto Grande -->
        <img [src]="selectedPhoto.url" class="main-photo">

        <div class="details">
          <h1>{{ selectedPhoto.title }}</h1>
          <p>{{ selectedPhoto.category }} ‚Ä¢ {{ selectedPhoto.location }}</p>
          <button class="btn-map" (click)="openMap(selectedPhoto.location)">üìç Ver ubicaci√≥n</button>
        </div>

        <!-- Secci√≥n "M√°s de esta sesi√≥n" -->
        <div class="session-section" *ngIf="relatedPhotos.length > 0">
          <h3>More like this</h3>
          <div class="related-grid">
            <img
              *ngFor="let related of relatedPhotos"
              [src]="related.url"
              (click)="switchPhoto(related)"
            >
          </div>
        </div>

      </div>
    </div>
    <!-- Load More / Infinite Scroll Trigger -->
    <div class="actions">
      <button class="btn-load" (click)="loadMore()" [disabled]="isLoading">
        {{ isLoading ? 'Loading...' : 'Load More' }}
      </button>
    </div>
  </main>
</div>
